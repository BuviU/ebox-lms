var ebox_shortcodes=jQuery.extend(ebox_shortcodes||{},{tinymce_editor:null,show_popup_html:function(){if("undefined"!=typeof ebox_admin_shortcodes_assets&&""!=ebox_admin_shortcodes_assets||(ebox_admin_shortcodes_assets={}),jQuery("#ebox_shortcodes_holder").length)ebox_shortcodes.popup_show();else{jQuery("body").append('<div id="ebox_shortcodes_holder" style="display: none;"><div id="ebox_shortcodes"></div></div>');var e={action:"ebox_generate_shortcodes_content",atts:ebox_admin_shortcodes_assets};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"html",cache:!1,data:e,error:function(e,s,t){},success:function(e){void 0!==e&&jQuery("#ebox_shortcodes").html(e),ebox_shortcodes.popup_init(),ebox_shortcodes.popup_show()}})}},popup_show:function(){if("thickbox"===ebox_admin_shortcodes_assets.popup_type){var e=ebox_shortcodes.get_tinymce_url();tb_show(ebox_admin_shortcodes_assets.popup_title,e)}else if("jQuery-dialog"===ebox_admin_shortcodes_assets.popup_type){var s=.9*jQuery(window).width(),t=.9*jQuery(window).height();jQuery("#ebox_shortcodes").dialog({title:ebox_admin_shortcodes_assets.popup_title,dialogClass:"wp-dialog ld-shortcodes",autoOpen:!0,draggable:!1,width:s,height:t,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){jQuery(".ui-widget-overlay").on("click",(function(){jQuery("#my-dialog").dialog("close")}))},create:function(){jQuery(".ui-dialog-titlebar-close").addClass("ui-button")}}),ebox_shortcodes.popup_set_dimensions(),jQuery("#ebox_shortcodes").dialog("open")}},popup_set_dimensions:function(){var e=.9*jQuery(window).width(),s=.9*jQuery(window).height();if(jQuery("#ebox_shortcodes").dialog("option","width",e),jQuery("#ebox_shortcodes").dialog("option","height",s),window.isRtl){var t=parseInt(jQuery(".ui-dialog.ld-shortcodes").css("left")),o=parseInt(jQuery(".ui-dialog.ld-shortcodes").css("right"));o=-1*t,jQuery(".ui-dialog.ld-shortcodes").css("right",o+"px")}},get_tinymce_url:function(){var e=jQuery(window).width(),s=950<e?950:e,t=jQuery(window).height();return"#TB_inline?width="+(s-=80)+"&height="+(t-=84)+"&inlineId=ebox_shortcodes"},tinymce_callback:function(e){ebox_shortcodes.tinymce_editor=e,ebox_shortcodes.show_popup_html()},qt_callback:function(){ebox_shortcodes.tinymce_editor=null,ebox_shortcodes.show_popup_html()},popup_init:function(){jQuery("#ebox_shortcodes_tabs a").on("click",(function(e){e.preventDefault(),ebox_shortcodes.tabs_switch(jQuery(this))})),ebox_shortcodes.tabs_switch(jQuery("#ebox_shortcodes a").first()),jQuery("form.ebox_shortcodes_form").on("submit",(function(e){e.preventDefault(),tb_remove(),ebox_shortcodes.popup_submit(this)})),jQuery(window).resize((function(){ebox_shortcodes.popup_set_dimensions()}))},tabs_switch:function(e){jQuery("#ebox_shortcodes_sections .hidable").hide(),jQuery("#ebox_shortcodes_sections #tabs-"+e.attr("data-nav")).show(),jQuery("#ebox_shortcodes_tabs li").removeClass("current"),e.parent().addClass("current")},get_selected_text:function(){var e=document.getElementById("content"),s=e.selectionStart,t=e.selectionEnd;return e.value.substring(s,t)},popup_submit:function(e){"jQuery-dialog"===ebox_admin_shortcodes_assets.popup_type&&jQuery("#ebox_shortcodes").dialog("close");var s=jQuery(e).attr("shortcode_slug"),t=jQuery(e).attr("shortcode_type");void 0===t&&(t=1);var o="["+s,a=e.elements,r="";if(a.length>0)for(var d=0;d<a.length;){var n=a[d];d+=1;var i=n.getAttribute("data-shortcode-exclude");if(void 0===i||"1"!=i)switch(n.type){case"textarea":2==t?r=n.value:o+=" "+n.name+'="'+n.value.replace(/"/g,'\\"')+'"';break;case"checkbox":n.checked&&void 0!==n.value&&""!=n.value&&"0"!=n.value&&(o+=" "+n.name+'="'+n.value.replace(/"/g,'\\"')+'"');break;case"submit":break;case"select-multiple":var h=jQuery(n).attr("name").replace("[]",""),l="";jQuery(":selected",n).each((function(e,s){var t=jQuery(s).val();void 0!==t&&""!=t&&(l.length>0&&(l+=","),l+=t.replace(/"/g,'\\"'))})),l.length>0&&(o+=" "+h+'="'+l+'"');break;default:void 0!==n.value&&""!=n.value&&(o+=" "+n.name+'="'+n.value.replace(/"/g,'\\"')+'"')}}o+="]",2==t&&""!=r&&(o+=r,o+="[/"+s+"]"),null!==ebox_shortcodes.tinymce_editor?ebox_shortcodes.tinymce_editor.setContent(o):"undefined"!=typeof QTags&&QTags.insertContent(o)}});